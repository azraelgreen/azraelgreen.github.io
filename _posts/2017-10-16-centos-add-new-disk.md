---
layout: post
title: CentOS 6.4 服务器添加新硬盘步骤
date: 2017-10-16
categories: blog
tags: [centos]
description: CentOS 6.4 服务器添加新硬盘步骤
---

新加硬盘的操作步骤：

	1、 服务器关机
	2、 添加新硬盘
	3、 服务器开机，对新硬盘进行分区，使用 fdisk 命令
	4、 对新分区进行格式化，使用 mkfs.ext* 相关命令
	5、 对新分区进行挂载，使用 mount、df 命令

### 一、查看分区情况

我们启动Centos，然后使用fdisk命令进行查看：

	fdisk -l

可以看到目前服务器上有两块硬盘：硬盘sda、sdb。

其中硬盘sda被分成3个分区，sda1为系统启动分区。而硬盘sdb目前没有进行任何分区。

### 二、新硬盘分区

现在我们来对硬盘sdb进行分区，使用fdisk命令：

	fdisk /dev/sdb

fdisk常用命令:

	m 显示所有的命令
	n 新建分区，使用该命令进入选项后
	e 表示新建扩展分区
	p 表示新建主分区

	P 显示分区
	q 不保存修改并退出
	w 保存修改并退出

以上分区完毕后，我们再次使用 `fdsik` 命令进行查看，可以很明显的看到目前硬盘sdb已经被分成 `dev/sdb1` 这个分区。

这部分操作就相当于windows系统中的新建分区，此时还没有进行格式化。

### 三、新分区格式化

下面进行格式化操作:

由于Linux系统有不同的文件系统。比如：ext2、ext3、ext4。每一种文件系统的都不一样，而Centos6.4 默认使用的是 `ext4` 文件系统。所以我们要把该新分区格式化成 `ext4` 格式。

我们可以使用 `mkfs.ext4` 命令进行，如果设置成 `ext3` 格式的话，我们可以使用 `mkfs.ext3` ：

	mkfs.ext4 /dev/sdb1

格式化完毕后，我们就可以进行分区挂载。

### 四、分区临时挂载

分区的挂载又可以分成两部分：`临时挂载` 和 `永久挂载`。

`临时挂载`，是在系统重启后，挂载就会消失。

而`永久挂载`是把要挂载的分区写入到 `/etc/fstab` 文件中。系统启动时会自动读取该文件的内容。

我们先来进行临时挂载，新建一个目录用来挂载分区：

`mkdir /data`     在根目录下新建data目录

`mount –t ext4 /dev/sdb1 /data`      此命令的作用是把 `/data` 目录挂载到 `/dev/sdb1` 分区下，其中 `-t` 是指定的文件系统类型。

`mount –a`      使挂载生效。

`mount`      查看所有挂载。

以上是临时挂载，下面我们进行永久挂载设置。

### 五、分区永久挂载

在设置永久挂载之前，我们首先要卸载刚刚已经进行的挂载，使用 `umount` 命令：

	umount /data/

卸载完毕后，我们来编辑 `/etc/fstab` 文件，并加入如下内容：

	/dev/sdb1 /data ext4 defaults 0 0

然后使用 `mount –a` 命令，使挂载生效。

